# KT_MINI_PROJECT_6-2

# 응급 상황 대응 시스템 (Emergency Response System)

## 프로젝트 개요

응급 상황에서 환자의 생명을 살리는 데 가장 중요한 요소는 신속한 판단과 빠른 응급실 이송입니다. 본 프로젝트는 응급 상황에서 환자 상태를 신속하게 파악하고 최적의 응급실을 추천하는 AI 기반 시스템을 개발하는 것을 목표로 합니다.

## 문제 정의

현재 응급 상황에서는 다음과 같은 문제점이 존재합니다:
- 응급실 상황을 확인하는데 시간이 많이 소요됨
- 응급실 병상 부족 현상
- 비응급 환자의 응급실 이용으로 인한 자원 낭비
<img width="323" alt="Image" src="https://github.com/user-attachments/assets/8d22c735-c0db-4586-a528-cc8a9adb261d" />

## 시스템 구성

본 시스템은 다음 3단계로 구성됩니다:

1. **음성인식 및 요약**
   - 응급 전화 음성을 텍스트로 변환
   - 내용 요약 및 핵심 키워드 도출

2. **응급 상황 등급 분류**
   - 요약된 내용을 바탕으로 응급 등급 분류

3. **응급실 연계(추천)**
   - 응급 등급, 교통 상황, 응급실 상황을 고려하여 최적의 응급실 추천

## 활용 모델

### 1. 음성인식 및 요약
- **OpenAI Whisper**: STT(Speech-to-Text) 모델
  - 680,000시간 분량의 다국어 데이터 기반으로 훈련된 자동 음성 인식(ASR) 시스템
  - 인코더-디코더 트랜스포머 기반 엔드투엔드 방식

- **OpenAI GPT-3.5 Turbo**
  - 자연어 이해 및 생성 모델
  - 요약 및 키워드 추출에 활용

### 2. 응급상황 등급 분류
- **BERT(Bidirectional Encoder Representations from Transformers)**
  - 특히 한국어 NLP를 위한 klue/bert-base 모델 사용
  - 양방향 문맥 이해 능력 보유
  - 텍스트 분류 작업에 뛰어난 성능

### 3. 응급실 연계(추천)
- **Naver Maps API**
  - 정확한 위치 정보 및 경로 안내
  - 실시간 교통 정보 활용 가능

## 데이터셋

본 프로젝트는 다음과 같은 데이터를 활용합니다:

1. **음성 샘플 파일(.mp3)** - 응급 상황 통화 내용
2. **중증도 분류 데이터** - 한국 응급환자 중증도 분류기준에 따른 데이터
   - 중증 응급환자: 1등급 및 2등급
   - 중증 응급의심환자: 3등급
   - 경증 응급환자 및 비응급환자: 4등급 및 5등급
3. **전국 응급실 정보** - 위치 및 가용 병상 정보


## 프로젝트 수행 절차

### Step 1: 음성 인식 및 요약 (개인 과제)
- **미션1 – 음성인식: STT**
  - Whisper API 연결
  - MP3 파일을 텍스트로 변환
  - 응급 전화 시나리오 직접 녹음 (최소 5건)

- **미션2 – 내용 요약 및 키워드 도출**
  - GPT-3.5 Turbo API 연결
  - 텍스트 내용 요약 및 키워드 추출

### Step 2: 응급 등급 분류 (개인 과제)
- **미션3: BERT 모델 Fine-Tuning**
  - Huggingface에서 BERT 모델(klue/bert-base) 다운로드
  - 응급상황 분류를 위한 파인 튜닝 수행
  - 추가 데이터 수집(제작) - 등급별 최소 100건씩
  - 분류 모델 성능 평가

### Step 3: 응급실 추천 (개인 과제)
- **미션4: 응급실 추천**
  - 응급실 위치와 발신자 위치 기반 추천
  - Haversine 거리 계산 활용
  - 가까운 응급실 찾기 알고리즘 구현

### Step 4: 통합(Assemble) (조별 과제)
- **미션5: 단계1~3 고도화**
  - BERT 모델 성능 향상
  - 응급실 추천 방식 개선 (Naver Maps API 활용)

- **미션6: 단계1~3 통합**
  - Python 코드 모듈화
  - 단위 테스트 수행
  - 파이프라인 구축


## 기술적 세부 구현

### Haversine 거리 계산
경도와 위도가 주어진 두 지점 간의 거리를 계산하는 방법으로, 항공, GPS, 위치 기반 서비스에서 널리 사용됩니다.

### Naver Maps API 활용
1. NAVER Cloud Platform 회원가입
2. Maps 서비스 활성화
3. Application 등록 (Direction 5 - 자동차 이동 거리 서비스)
4. 인증 키 저장 및 활용

### 코드 모듈화
모든 기능을 함수로 구현하여 `.py` 파일로 정리하고, 파이프라인에서 임포트하여 사용합니다.

```python
import openai
import pandas as pd
import json

def transcribe_audio(audio_path):
    # 구현 내용
    return result

def summarize_text(text):
    # 구현 내용
    return summary
```

## 시스템 파이프라인 구성도

```
1단계: 음성인식 및 요약 -> 2단계: 응급상황 등급분류 -> 3단계: 응급실 연계(추천)
   |                           |                            |
Whisper API               BERT 모델                  Naver Maps API
GPT API                   (Fine-tuned)              응급실 DB
   |                           |                            |
음성 -> 텍스트               등급 분류                    최적 응급실 추천
요약 및 키워드                                          (거리, 소요시간 고려)
```
<img width="756" alt="Image" src="https://github.com/user-attachments/assets/475747d2-cd8f-4420-9970-53583fd94495" />

## 기대 효과

- 응급 상황 판단 시간 단축
- 최적의 응급실 신속 연계
- 응급 의료 자원의 효율적 분배
- 환자 생존율 향상
